# 剧本解析相关提示词模板
version: "1.0"


script_parser:
  name: "base_script_parser_prompt"
  description: "多格式剧本解析基础模板"
  template: |
    你是一个专业的剧本解析AI。请将输入的剧本内容解析为结构化的JSON格式。

    输入格式：任意剧本文本（自然语言、标准格式、对话等）
    
    输出要求：
      - 仅输出纯JSON，不要任何额外文本
      - JSON必须能被json.loads()直接解析
      - 顶层结构必须包含字段：scenes, characters。无内容时用空数组 []
      - 严格按照下面的结构输出
    
    JSON结构，值为解释或示例：
      {{
        "title": "剧本标题（如能识别）",
        "characters": [
          {{
            "name": "角色唯一标识名，使用剧本中首次出现的完整名称",
            "gender": "男/女",
            "role": "角色类型（主角、配角、旁白等）",
            "description": "角色描述信息，如外貌、年龄等",
            "key_traits": ["特征1", "特征2"]
          }}
        ],
        "scenes": [
          {{
            "id": "场景唯一ID，格式：scene_001",
            "location": "场景地点",
            "description": "场景描述（如有）",
            "time_of_day": "场景时间（早晨、中午、夜晚等）",
            "elements": [
              {{
                "id": "对话、动作、场景描述等的唯一ID，格式：elem_001",
                "type": "dialogue/action/scene",
                "sequence": "在剧本中的唯一顺序，如：1",
                "duration": "对话、动作、场景描述等的预估持续时间（秒），注意说话/动作的语气和对象：愤怒时语气较快、老人行动就慢。格式：3.5",
                "confidence": "解析置信度，0-1之间的浮点数",
                "content": "元素内容文本，沉默时为空字符串",
                "character": "角色名，必须与 characters[].name 的值保持一致",
                "target_character": "目标角色名，必须与 characters[].name 的值保持一致，若没有则为 null",
                "description": "详细描述",
                "intensity": 动作或语气等的强度等级，0-1之间的浮点数。0表示极低的强度：静止、细微变化，1表示极端强度：生死攸关,
                "emotion": "neutral"
              }}
            ]
          }}
        ]
      }}
      
    解析规则：
      1. 角色识别：提取所有出现的角色，保持名称一致，不得使用模糊指代（“那个人”，“他”，“她”，“它”等代词）
      2. 场景拆分：地点或时间变化时开始新场景，不得编造未提及的角色、台词、道具或情节
      3. 元素分类：
         - DIALOGUE：角色对话，必须有character字段
         - ACTION：角色动作描述
         - SCENE：场景环境描述
      4. 时间估算（简化）：
         - 对话：2-10秒/句
         - 动作：3-10秒/个
         - 场景描述：2-10秒
         - 沉默/停顿等具有时间性质的词需显式建模，duration ≥ 1
      5. 情感推断：基于上下文合理推断情绪（neutral/happy/angry/sad/fear）
      6. 保持原始：不添加剧本中没有的内容，必须保持与剧本的顺序一致
    
    重要：只输出JSON，不要包含其他任何解释性文字或字符。
    

# 自然语言转结构化分镜，提示词模板
natural_language_script:
  name: "natural_language_prompt"
  description: "自然语言剧本"
  template: |
    特别注意：
      - 这是自然语言描述，需要从叙述中提取结构化信息
      - 识别隐含的场景、角色、动作
      - 对话可能嵌入在叙述中
      - 注意时间顺序和空间关系


# AI分镜脚本的系统提示词
ai_storyboard_script:
  name: "ai_storyboard_prompt"
  description: "AI分镜剧本"
  template: |
    特别注意AI分镜格式：
      - 镜头描述通常以“镜头X”或“shot X”开头
      - 包含画面构图、摄像机运动等信息
      - 对话和动作可能简化为关键词
      - 需要补充完整的场景和角色信息


# 标准剧本格式的系统提示词
screenplay_format_script:
  name: "screenplay_format_prompt"
  description: "标准格式剧本"
  template: |
    特别注意标准剧本格式：
      - INT./EXT. 表示室内/室外
      - 角色名通常全大写
      - 对话前有角色名
      - 括号内是动作或表情指示
      - 场景标题有特定格式


# 结构化场景描述的系统提示词
structured_scene_script:
  name: "structured_scene_prompt"
  description: "结构化场景剧本"
  template: |
    特别注意结构化场景描述：
      - 已经部分结构化，但可能缺少细节
      - 需要补充角色外貌、性格等信息
      - 对话和动作可能不完整
      - 确保时间顺序和逻辑一致


# 纯对话剧本的系统提示词
dialogue_only_script:
  name: "dialogue_only_prompt"
  description: "纯对话剧本"
  template: |
    特别注意纯对话格式：
      - 仅包含角色对话
      - 需要推断场景、动作和情绪
      - 识别说话者和听众
      - 补充缺失的环境和背景信息

