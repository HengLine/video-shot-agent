# 连续性守护智能体配置文件

# 版本信息
version: "1.0"
description: "连续性守护智能体配置文件，用于检查剧本中角色情绪的连续性"

# 默认角色外观配置
default_appearances:
  pose: "站立"
  position: "画面中央"
  emotion: "平静"
  gaze_direction: "前方"
  holding: "无"

# 情绪映射表
emotion_mapping:
  # 中性情绪
  中性:
    - "平静"
    - "疑问"
    - "犹豫"
    - "自然"
    - "正常"
    - "平常"
    - "一般"
  
  # 正面情绪
  正面:
    - "激动"
    - "开心"
    - "快乐"
    - "兴奋"
    - "满足"
    - "感激"
    - "喜悦"
    - "幸福"
    - "满意"
    - "愉悦"
  
  # 负面情绪
  负面:
    - "震惊"
    - "愤怒"
    - "悲伤"
    - "恐惧"
    - "焦虑"
    - "失望"
    - "难过"
    - "沮丧"
    - "痛苦"
    - "害怕"

# 情绪过渡规则
emotion_transition_rules:
  "正面":
    - "正面"
    - "中性"
  "负面":
    - "负面"
    - "中性"
  "中性":
    - "正面"
    - "负面"
    - "中性"

# 角色特殊处理规则
character_special_rules:
  # 电话那头的角色规则
  phone_characters:
    keywords:
      - "电话那头"
      - "off-screen"
    default_pose: "off-screen"
    default_position: "off-screen"
    default_holding: "无"
    default_gaze: "前方"
    default_emotion: "未知"

# 相机约束规则
camera_constraints:
  single_action_shot_type: "中景"
  multi_action_shot_type: "中景"
  default_angle: "平视角度"
  maintain_consistency: true

# 向量记忆配置 - 用于角色状态的向量化表示
vector_memory:
  # 向量维度配置
  dimensions:
    pose: 4
    position: 5
    emotion: 2
    gaze_direction: 3
    holding: 5
  
  # 姿势映射
  pose_mapping:
    "站立": [1.0, 0.0, 0.0, 0.0]
    "坐": [0.0, 1.0, 0.0, 0.0]
    "躺": [0.0, 0.0, 1.0, 0.0]
    "跪": [0.0, 0.0, 0.0, 1.0]
    "unknown": [0.0, 0.0, 0.0, 0.0]
    "off-screen": [-1.0, -1.0, -1.0, -1.0]
  
  # 位置映射
  position_mapping:
    "画面中央": [1.0, 0.0, 0.0, 0.0, 0.0]
    "左侧": [0.0, 1.0, 0.0, 0.0, 0.0]
    "右侧": [0.0, 0.0, 1.0, 0.0, 0.0]
    "前景": [0.0, 0.0, 0.0, 1.0, 0.0]
    "背景": [0.0, 0.0, 0.0, 0.0, 1.0]
    "unknown": [0.0, 0.0, 0.0, 0.0, 0.0]
    "off-screen": [-1.0, -1.0, -1.0, -1.0, -1.0]
  
  # 情绪映射
  emotion_mapping:
    "平静": [0.5, 0.5]  # 中性
    "开心": [1.0, 0.8]  # 正面
    "愤怒": [0.0, 0.8]  # 负面
    "悲伤": [0.0, 0.5]  # 负面
    "惊讶": [0.5, 1.0]  # 中性
    "恐惧": [0.0, 1.0]  # 负面
    "满意": [1.0, 0.5]  # 正面
    "失望": [0.0, 0.3]  # 负面
    "unknown": [0.5, 0.0]  # 未知
  
  # 视线方向映射
  gaze_mapping:
    "前方": [0.0, 0.0, 1.0]
    "左侧": [-1.0, 0.0, 0.0]
    "右侧": [1.0, 0.0, 0.0]
    "上": [0.0, 1.0, 0.0]
    "下": [0.0, -1.0, 0.0]
    "向物体": [0.5, 0.0, 0.5]
    "unknown": [0.0, 0.0, 0.0]
  
  # 手持物品映射
  holding_mapping:
    "无": [1.0, 0.0, 0.0, 0.0, 0.0]
    "智能手机": [0.0, 1.0, 0.0, 0.0, 0.0]
    "咖啡杯": [0.0, 0.0, 1.0, 0.0, 0.0]
    "书籍": [0.0, 0.0, 0.0, 1.0, 0.0]
    "文件": [0.0, 0.0, 0.0, 0.0, 1.0]
    "unknown": [0.0, 0.0, 0.0, 0.0, 0.0]

# 状态机配置 - 用于管理角色状态的转换
state_machine:
  # 状态权重配置
  state_weights:
    pose: 0.3        # 姿势权重
    position: 0.25   # 位置权重
    emotion: 0.3     # 情绪权重
    gaze_direction: 0.1  # 视线方向权重
    holding: 0.05     # 手持物品权重
  
  # 状态转换规则
  transition_rules:
    pose:
      "站立": ["站立", "坐", "跪"]
      "坐": ["坐", "站立", "躺"]
      "躺": ["躺", "坐"]
      "跪": ["跪", "站立"]
      "unknown": ["站立", "坐", "躺", "跪"]
      "off-screen": ["off-screen"]
    position:
      "画面中央": ["画面中央", "左侧", "右侧", "前景", "背景"]
      "左侧": ["左侧", "画面中央", "前景", "背景"]
      "右侧": ["右侧", "画面中央", "前景", "背景"]
      "前景": ["前景", "画面中央", "左侧", "右侧"]
      "背景": ["背景", "画面中央", "左侧", "右侧"]
      "unknown": ["画面中央", "左侧", "右侧", "前景", "背景"]
      "off-screen": ["off-screen"]
    gaze_direction:
      "前方": ["前方", "左侧", "右侧", "上", "下", "向物体"]
      "左侧": ["左侧", "前方", "向物体"]
      "右侧": ["右侧", "前方", "向物体"]
      "上": ["上", "前方", "向物体"]
      "下": ["下", "前方", "向物体"]
      "向物体": ["向物体", "前方", "左侧", "右侧", "上", "下"]
      "unknown": ["前方", "左侧", "右侧", "上", "下", "向物体"]
    holding:
      "无": ["无", "智能手机", "咖啡杯", "书籍", "文件"]
      "智能手机": ["智能手机", "无"]
      "咖啡杯": ["咖啡杯", "无"]
      "书籍": ["书籍", "无"]
      "文件": ["文件", "无"]
      "unknown": ["无", "智能手机", "咖啡杯", "书籍", "文件"]