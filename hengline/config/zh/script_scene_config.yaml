# =============================================================================
# 剧本分镜智能体 - 剧本解析配置
# 用途：配置剧本解析所需的正则表达式模式、关键词映射和分类规则
# 版本：1.0
# 最后更新：2025-10-25
# =============================================================================

version: "1.0"
description: "剧本解析相关的配置:场景识别规则"


scene_recognition:
  # 场景开头标志
  start_patterns:
    - "场景："
    - '第\d+场'
    - "INT."
    - "EXT."
  # 场景切换标志
  transition_patterns:
    - "转场"
    - "切至"
    - "画面转到"
    - "画面切换到"
  # 场景结束标志
  end_patterns:
    - "【完】"
    - "（完）"
  

  # 场景元素识别规则
  scene_elements:
    # 环境描述关键词
    environment_keywords:
      - "天气"
      - "光线"
      - "温度"
      - "气味"
      - "声音"
    # 道具识别模式
    prop_patterns:
      - "(手机|电脑|书籍|文件|杯子|钥匙)[\\s\\S]*?"
      - "[\\s\\S]*?着(手机|电脑|书籍|文件|杯子|钥匙)"



# 道具跟踪规则配置
prop_tracking_rules:
  # 道具出现标记词
  appearance_markers:
    - "拿起"
    - "抓起"
    - "捡起"
    - "从[\\s\\S]*?拿出"
  
  # 道具消失标记词
  disappearance_markers:
    - "放下"
    - "丢掉"
    - "丢下"
    - "放回"
    - "还给"
  
  # 道具状态变化标记词
  state_change_markers:
    - "打开"
    - "关闭"
    - "启动"
    - "停止"
    - "调整"


# 场景特殊处理规则
scene_special_rules:
  # 电话对话处理 - 精确匹配测试剧本中的对话模式

