version: "1.1"

temporal_planner:
  name: "temporal_planner_prompt"
  description: "时长估算提示词基础模板"
  template: |
    你是一位专业的影视分镜师和时长估算专家。
    你的任务是根据剧本内容，估算每个元素在视频中应该占用的合理时长（秒）。
  
    请遵循以下专业原则：
    1. **电影节奏原则**：考虑情绪积累、信息传达速度、观众理解时间
    2. **视觉叙事原则**：重要视觉元素需要更多展示时间  
    3. **心理时间感知**：紧张场景感觉时间更长，实际可能更短
    4. **连续性需求**：为动作完成、反应时间留出余地
  
    请以JSON格式回复，包含以下字段：
    - estimated_duration: 估算的时长（秒，浮点数）
    - confidence: 置信度（0-1，浮点数）
    - reasoning_breakdown: 时长分解详情（对象，包含各部分的秒数）
    - visual_hints: 视觉表现建议（对象，可选）
    - key_factors: 关键影响因素（数组，字符串）
    - pacing_notes: 节奏建议（字符串，可选）
    
    请严格按照以下JSON格式回复：
      {{
        "estimated_duration": 0.0,
        "confidence": 0.0,
        "reasoning_breakdown": {{}},
        "visual_hints": {{}},
        "key_factors": [],
        "pacing_notes": ""
      }}

########################################## 场景估算提示词 ##########################################
scene_planner:
  name: "scene_planner_prompt"
  description: "估算场景时长"
  template: |
    ## 场景时长估算任务

    ### 场景信息
      - 场景ID: {scene_id}
      - 地点: {location}
      - 时间: {time_of_day}
      - 氛围: {mood}
      - 关键视觉元素: {key_visuals_str}

    ### 场景描述
    {description}

    ### 专业分析指导
    请分析以下方面：
      1. **建立镜头需要时间**：观众需要多久理解场景空间？
      2. **氛围建立时间**：情绪氛围需要多久传递？
      3. **细节展示时间**：关键视觉元素各需要多少展示时间？
      4. **节奏考虑**：根据前后文，这个场景应该快还是慢？

    ### 典型参考时长（秒）
      - 简单场景建立：2-3秒
      - 中等细节场景：4-6秒  
      - 复杂/情绪场景：7-10秒
      - 关键氛围场景：10-15秒

########################################## 对话时长估算提示词 ##########################################
dialogue_planner:
  name: "dialogue_planner_prompt"
  description: "估算动作时长"
  template: |
    ## 对话时长估算任务

    ### 对话信息
      - 对话ID: {dialogue_id}
      - 说话者: {speaker}
      - 情绪: {emotion}
      - 声音特质: {voice_quality}
      - 表演提示: {parenthetical}
      - 对话类型: {dialogue_type}

    ### 对话内容
    "{content}"

    ### 专业分析指导
    请分析以下方面：
      1. **语速分析**：基于情绪和角色，正常/快/慢语速？
      2. **情感停顿**：需要多少情绪反应时间？
      3. **信息密度**：这句话信息量多大？需要观众消化时间吗？
      4. **视觉配合**：说话时会有哪些视觉变化需要时间？
    
    ### 语言学特征分析
      - 词数: {word_count}
      - 标点特征: {punctuation_analysis}
      - 情感词汇: {emotional_words}
      - 句子复杂度: {sentence_complexity}

    ### 典型对话时长参考（秒）
      - 简短回应（1-3词）: 1.0-1.5秒
      - 正常句子（4-8词）: 2.0-3.0秒
      - 情感表达（含停顿）: 3.0-5.0秒
      - 重要台词（强调）: 3.5-4.5秒


########################################## 沉默时长估算提示词 ##########################################
silence_planner:
  name: "silence_planner_prompt"
  description: "沉默时长估算任务"
  template: |
    ## 沉默时长估算任务

    ### 沉默信息
      - 对话ID: {dialogue_id}
      - 情绪: {emotion}
      - 动作描述: {parenthetical}

    ### 专业分析指导
      沉默在影视中具有重要叙事功能：
      1. **情绪沉默**：震惊、悲伤、思考需要的沉默时间不同
      2. **反应沉默**：听到重大信息后的消化时间
      3. **张力沉默**：制造紧张感的沉默
      4. **过渡沉默**：场景或情绪转换的沉默

    ### 典型沉默时长参考（秒）
      - 短暂停顿: 0.5-1.0秒
      - 情感反应: 1.5-2.5秒
      - 深度震惊: 2.5-4.0秒
      - 张力构建: 3.0-5.0秒


########################################## 动作时长估算提示词 ##########################################
action_planner:
  name: "action_planner_prompt"
  description: "估算动作时长"
  template: |
    ## 动作时长估算任务

    ### 动作信息
      - 动作ID: {action_id}
      - 执行者: {actor}
      - 动作类型: {action_type}
      - 目标: {target}

    ### 动作描述
    "{description}"

    ### 专业分析指导
      请将动作分解为子动作，并分析：
      1. **物理可行性**：完成这个动作实际需要多少时间？
      2. **表演价值**：为了戏剧效果，需要延长多少时间？
      3. **视觉清晰度**：观众需要多久看清这个动作？
      4. **情感权重**：这个动作的情感意义需要额外时间吗？

    ### 动作复杂度评估
      - 动作部件数量: {component_count}
      - 精细程度: {fineness_level}
      - 空间移动范围: {movement_range}

    ### 典型动作时长参考（秒）
      - 微表情变化: 0.8-1.2秒
      - 简单手势: 1.0-1.5秒
      - 中等动作: 1.5-2.5秒
      - 复杂序列: 2.5-4.0秒
      - 关键戏剧动作: 3.0-5.0秒

########################################## 其他增强提示词 ##########################################
punctuation_analysis_planner:
  name: "punctuation_analysis_prompt"
  description: "标点符号特征"
  template: |
    分析文本中的标点符号特征：
    - 省略号（...、……）表示犹豫或未说完，通常需要额外时间
    - 问号（？）表示疑问，需要反应时间
    - 感叹号（！）表示强烈情感，可能需要强调时间
    - 破折号（—）表示转折或插入，可能需要停顿

emotional_indicators_planner:
  name: "emotional_indicators_prompt"
  description: "情感强度"
  template: |
    情感强度指示词：
    - 高强度：颤抖、哽咽、哭泣、怒吼、尖叫
    - 中强度：低沉、轻声、缓慢、犹豫
    - 低强度：平静、温和、正常、轻松

shot_type_suggestions_planner:
  name: "shot_type_suggestions_prompt"
  description: "镜头类型"
  template: |  
    镜头类型建议：
    - 特写（close_up）：情感表达、微表情
    - 中景（medium_shot）：对话、中等动作
    - 全景（wide_shot）：场景建立、空间关系
    - 过肩（over_shoulder）：对话互动
    - 跟踪（tracking_shot）：动作跟随

lighting_suggestions_planner:
  name: "lighting_suggestions_prompt"
  description: "灯光建议"
  template: |    
    灯光建议：
    - 高调光（high_key）：轻松、明亮场景
    - 低调光（low_key）：紧张、神秘场景
    - 侧光（side_light）：强调轮廓、创造深度
    - 背光（back_light）：创造剪影、分离主体
    - 柔光（soft_light）：情感、柔和场景


########################################## 批量模板 ##########################################
scene_batch_planner:
  name: "scene_batch_prompt"
  description: "场景批量"
  template: |
    ## 批量场景时长估算任务

    你收到{count}个场景需要估算时长。
    请为每个场景独立分析，考虑其独特性。

    ### 场景列表（简略）
    {scenes_summary}

    ### 估算要求
    请为每个场景提供独立的时长估算，输出格式如下：
    {{
      "results": [
        {{
          "scene_id": "场景ID",
          "estimated_duration": 时长,
          "confidence": 置信度,
          "pacing_category": "快/中/慢",
          "key_visual_emphasis": ["关键视觉元素"]
        }}
      ],
      "comparison_notes": "场景间的节奏对比说明",
      "pacing_arc": "整体节奏曲线描述",
      "visual_continuity": ["跨场景的视觉连续性要求"]
    }}

    请特别注意场景间的相对时长关系。


dialogue_batch_planner:
  name: "dialogue_batch_prompt"
  description: "对话批量"
  template: |
    ## 批量对话时长估算任务

    你收到{count}个对话需要估算时长，包括普通对话和沉默。
    请分析对话间的节奏关系和情感流动。

    ### 对话列表（简略）
    {dialogues_summary}

    ### 估算要求
    请为每个对话提供独立的时长估算，输出格式如下：
    {{
      "results": [
        {{
          "dialogue_id": "对话ID",
          "estimated_duration": 时长,
          "confidence": 置信度,
          "pacing_category": "快/中/慢",
          "emotional_weight": "高/中/低"
        }}
      ],
      "comparison_notes": "对话间的节奏对比说明",
      "conversation_flow": "对话流程分析",
      "silence_distribution": "沉默分布建议"
    }}


action_batch_planner:
  name: "action_batch_prompt"
  description: "动作批量"
  template: |
    ## 批量动作时长估算任务

    你收到{count}个动作需要估算时长。
    请分析动作序列的节奏和视觉连贯性。

    ### 动作列表（简略）
    {actions_summary}

    ### 估算要求
    请为每个动作提供独立的时长估算，输出格式如下：
    {{
      "results": [
        {{
          "action_id": "动作ID",
          "estimated_duration": 时长,
          "confidence": 置信度,
          "pacing_category": "快/中/慢",
          "action_complexity": "简单/中等/复杂"
        }}
      ],
      "comparison_notes": "动作间的节奏对比说明",
      "movement_progression": "动作进展分析",
      "tension_build": "紧张感构建分析"
    }}
