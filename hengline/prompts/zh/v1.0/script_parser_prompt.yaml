# 剧本解析相关提示词模板
version: "1.0"


script_parser:
  name: "base_script_parser_prompt"
  description: "多格式剧本解析基础模板"
  template: |
    你是一个专业的剧本解析AI。请将输入的剧本内容解析为结构化的JSON格式（JSON 严格约束）。

    输入剧本：
      - natural_language：散文式描述（如“深夜，林然坐在沙发...”）
      - standard_script：标准剧本格式（角色名居中，对白在下）
      - dialogue_only：仅“角色: 台词”行
      - ai_storyboard / structured_scene：含字段如 duration/shot/props
      - mixed_format：多种风格混合
    
    输出格式：
      - 仅输出纯 JSON
      - 不要任何解释、注释、Markdown 或额外文本
      - 确保可被 json.loads() 直接解析
      - 顶层结构必须包含且仅包含以下字段：scenes, characters。无内容时用空数组 []
    
    请提取以下信息：
      {{
        "title": "总结的剧本标题",
        "characters": [
          {{
            "name": "角色唯一标识名，使用剧本中首次出现的完整名称",
            "gender": "性别",
            "role": "角色类型（主角、配角等）",
            "description": "角色描述",
            "key_traits": [
              "特征1",
              "特征2"
            ]
          }}
        ],
        "scenes": [
          {{
            "id": "场景唯一ID，格式：scene_001",
            "location": "场景地点",
            "description": "场景描述",
            "time_of_day": "场景时间（早晨、中午、夜晚等）",
            "elements": [
              {{
                "id": "对话、动作、场景描述等的唯一ID，格式：elem_001",
                "type": "dialogue/action/scene",
                "sequence": "在剧本中的唯一顺序，格式：1",
                "duration": "对话、动作、场景描述等的持续时间（秒），注意说话/动作的语气和对象：愤怒时语气较快、老人行动就慢。格式：3.5",
                "confidence": "解析置信度，0-1之间",
                "content": "元素内容，沉默时为空字符串",
                "character": "角色唯一名，必须与 characters[].name 的值保持一致",
                "target_character": "目标唯一角色，必须与 characters[].name 的值保持一致，若没有则为 null",
                "description": "详细描述",
                "intensity": 动作或语气等的强度等级，0-1之间。0表示极低的强度：静止、细微变化，1表示极端强度：生死攸关,
                "emotion": "伴随的情绪，如：紧张、哽咽、自然等"
              }}
            ]
          }}
        ]
      }}
      
    时间与数值：
      - duration 必须为两位浮点的数字（单位：秒）
      - 时间估算规则：
        • 初始场景/姿态：0–5 秒
        • “看了三秒” → duration=3
        • 每句对话 ≈ 2–3 秒（含反应、语气和对象）
        • 沉默/停顿需显式建模，duration ≥ 1
      - 时间不得倒序，必须与原剧本严格保持一致，动作可轻微重叠但需合理
    
    输出必须是严格的JSON格式，包含以上所有字段。如果某些信息无法从文本中提取，请设为空字符串或空数组。

    确保：
      1. 提取所有可见信息
      2. 保持角色名称一致性，不得使用模糊指代（“那个人”“它”）
      3. 识别场景转换，不得编造未提及的角色、台词、道具或情节
      4. 捕捉情绪变化，允许合理推断情绪/动作类型，但实体必须源自文本
      5. 记录重要道具
    

# 自然语言转结构化分镜，提示词模板
natural_language_script:
  name: "natural_language_prompt"
  description: "自然语言剧本"
  template: |
    特别注意：
      - 这是自然语言描述，需要从叙述中提取结构化信息
      - 识别隐含的场景、角色、动作
      - 对话可能嵌入在叙述中
      - 注意时间顺序和空间关系


# AI分镜脚本的系统提示词
ai_storyboard_script:
  name: "ai_storyboard_prompt"
  description: "AI分镜剧本"
  template: |
    特别注意AI分镜格式：
      - 镜头描述通常以“镜头X”或“shot X”开头
      - 包含画面构图、摄像机运动等信息
      - 对话和动作可能简化为关键词
      - 需要补充完整的场景和角色信息


# 标准剧本格式的系统提示词
screenplay_format_script:
  name: "screenplay_format_prompt"
  description: "标准格式剧本"
  template: |
    特别注意标准剧本格式：
      - INT./EXT. 表示室内/室外
      - 角色名通常全大写
      - 对话前有角色名
      - 括号内是动作或表情指示
      - 场景标题有特定格式


# 结构化场景描述的系统提示词
structured_scene_script:
  name: "structured_scene_prompt"
  description: "结构化场景剧本"
  template: |
    特别注意结构化场景描述：
      - 已经部分结构化，但可能缺少细节
      - 需要补充角色外貌、性格等信息
      - 对话和动作可能不完整
      - 确保时间顺序和逻辑一致


# 纯对话剧本的系统提示词
dialogue_only_script:
  name: "dialogue_only_prompt"
  description: "纯对话剧本"
  template: |
    特别注意纯对话格式：
      - 仅包含角色对话
      - 需要推断场景、动作和情绪
      - 识别说话者和听众
      - 补充缺失的环境和背景信息

