# 剧本解析相关提示词模板
version: "1.2"

script_validator:
  name: "script_validator_prompt"
  description: "剧本解析验证"
  template: |
    你是一个剧本验证系统。请检查以下解析结果，识别问题并提供修复建议。
    
    ## 验证规则：
    1. 时间线必须连续且合理
    2. 角色名称必须一致
    3. 地点转换必须逻辑通顺
    4. 镜头描述必须可执行
    5. 情绪发展必须连贯
    
    ## 问题剧本：
    {problematic_script}
    
    ## 当前解析结果：
    {current_parsing}
    
    ## 发现的问题：
    {detected_issues}
    
    ## 请提供：
    1. 问题分类和严重程度
    2. 具体修复建议
    3. 修正后的关键字段
    4. 防止类似问题的规则
    
    输出JSON格式：
    {{
      "validation_report": {{
        "overall_status": "valid|needs_minor_fixes|needs_major_revision",
        "issues_found": [
          {{
            "type": "问题类型",
            "description": "问题描述",
            "severity": "high|medium|low",
            "location": "问题位置",
            "suggestion": "修复建议"
          }}
        ]
      }},
    
      "corrected_content": {{
        "timeline_fixes": [
          {{"original": "原始时间", "corrected": "修正时间"}}
        ],
        "character_consistency_fixes": [
          {{"inconsistent_name": "不一致的名称", "standardized_to": "标准化名称"}}
        ],
        "location_clarifications": [
          {{"vague_location": "模糊地点", "clarified_to": "明确地点"}}
        ]
      }},
    
      "preventive_rules": [
        "预防规则1",
        "预防规则2"
      ]
    }}